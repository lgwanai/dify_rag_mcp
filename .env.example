# Dify RAG MCP Server 环境变量配置

# =============================================================================
# Dify API 配置 (必需)
# =============================================================================

# Dify API 密钥 (必需)
# 从 Dify 控制台获取: https://cloud.dify.ai/
DIFY_API_KEY=your_dify_api_key_here

# Dify API 基础URL (可选)
# 默认: https://api.dify.ai/v1
# 如果使用自部署的 Dify，请修改为你的 API 地址
DIFY_BASE_URL=https://api.dify.ai/v1

# =============================================================================
# 服务器配置
# =============================================================================

# 运行环境
# 可选值: development, production, testing
DIFY_ENVIRONMENT=development

# 日志级别
# 可选值: DEBUG, INFO, WARNING, ERROR, CRITICAL
DIFY_LOG_LEVEL=INFO

# 调试模式
# 启用详细的错误信息和调试日志
DIFY_DEBUG=false

# =============================================================================
# 网络配置
# =============================================================================

# HTTP 请求超时时间 (秒)
DIFY_TIMEOUT=30

# 最大重试次数
DIFY_MAX_RETRIES=3

# 重试延迟 (秒)
DIFY_RETRY_DELAY=1

# 连接池大小
DIFY_CONNECTION_POOL_SIZE=10

# =============================================================================
# MCP 服务器配置
# =============================================================================

# 默认传输方式
# 可选值: stdio, sse, websocket
MCP_TRANSPORT=stdio

# 服务器主机地址 (仅用于 sse 和 websocket)
MCP_HOST=localhost

# 服务器端口 (仅用于 sse 和 websocket)
MCP_PORT=8000

# WebSocket 端口 (仅用于 websocket)
MCP_WEBSOCKET_PORT=9000

# =============================================================================
# 缓存配置
# =============================================================================

# 启用缓存
DIFY_ENABLE_CACHE=true

# 缓存过期时间 (秒)
DIFY_CACHE_TTL=3600

# 缓存大小限制
DIFY_CACHE_MAX_SIZE=1000

# =============================================================================
# 日志配置
# =============================================================================

# 日志文件路径
DIFY_LOG_FILE=logs/dify-mcp-server.log

# 日志文件最大大小 (MB)
DIFY_LOG_MAX_SIZE=10

# 日志文件备份数量
DIFY_LOG_BACKUP_COUNT=5

# 启用日志轮转
DIFY_LOG_ROTATION=true

# =============================================================================
# 安全配置
# =============================================================================

# API 密钥加密盐值 (可选)
# 用于本地存储时加密 API 密钥
DIFY_ENCRYPTION_SALT=your_random_salt_here

# 允许的来源 (CORS)
# 逗号分隔的域名列表
DIFY_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# =============================================================================
# 性能配置
# =============================================================================

# 并发请求限制
DIFY_MAX_CONCURRENT_REQUESTS=10

# 请求队列大小
DIFY_REQUEST_QUEUE_SIZE=100

# 工作线程数
DIFY_WORKER_THREADS=4

# =============================================================================
# 搜索配置
# =============================================================================

# 默认搜索结果数量
DIFY_DEFAULT_TOP_K=5

# 最大搜索结果数量
DIFY_MAX_TOP_K=50

# 默认搜索阈值
DIFY_DEFAULT_SCORE_THRESHOLD=0.5

# =============================================================================
# 数据库配置 (如果需要本地存储)
# =============================================================================

# 数据库URL (可选)
# 用于本地缓存和会话存储
# DATABASE_URL=sqlite:///data/dify-mcp.db

# =============================================================================
# 监控配置
# =============================================================================

# 启用性能监控
DIFY_ENABLE_MONITORING=false

# 监控数据收集间隔 (秒)
DIFY_MONITORING_INTERVAL=60

# 健康检查间隔 (秒)
DIFY_HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 开发配置
# =============================================================================

# 启用热重载 (开发模式)
DIFY_HOT_RELOAD=true

# 启用 API 调试日志
DIFY_DEBUG_API=false

# 模拟模式 (用于测试)
DIFY_MOCK_MODE=false

# 测试数据文件路径
DIFY_TEST_DATA_PATH=test/fixtures

# =============================================================================
# 第三方服务配置
# =============================================================================

# Sentry DSN (错误监控)
# SENTRY_DSN=https://your-sentry-dsn-here

# Redis URL (缓存和会话)
# REDIS_URL=redis://localhost:6379/0

# =============================================================================
# 功能开关
# =============================================================================

# 启用实验性功能
DIFY_ENABLE_EXPERIMENTAL=false

# 启用批量操作
DIFY_ENABLE_BATCH_OPERATIONS=true

# 启用搜索历史
DIFY_ENABLE_SEARCH_HISTORY=true

# 启用搜索建议
DIFY_ENABLE_SEARCH_SUGGESTIONS=true

# =============================================================================
# 限流配置
# =============================================================================

# API 调用频率限制 (每分钟)
DIFY_RATE_LIMIT_PER_MINUTE=60

# 搜索频率限制 (每分钟)
DIFY_SEARCH_RATE_LIMIT=30

# 上传频率限制 (每小时)
DIFY_UPLOAD_RATE_LIMIT=100

# =============================================================================
# 文件处理配置
# =============================================================================

# 最大文件大小 (MB)
DIFY_MAX_FILE_SIZE=10

# 支持的文件类型
DIFY_ALLOWED_FILE_TYPES=.txt,.md,.pdf,.docx,.xlsx,.csv

# 临时文件目录
DIFY_TEMP_DIR=tmp

# 文件处理超时 (秒)
DIFY_FILE_PROCESSING_TIMEOUT=300

# =============================================================================
# 国际化配置
# =============================================================================

# 默认语言
DIFY_DEFAULT_LANGUAGE=zh-CN

# 支持的语言
DIFY_SUPPORTED_LANGUAGES=zh-CN,en-US,ja-JP

# 时区
DIFY_TIMEZONE=Asia/Shanghai

# =============================================================================
# 备份配置
# =============================================================================

# 启用自动备份
DIFY_ENABLE_BACKUP=false

# 备份间隔 (小时)
DIFY_BACKUP_INTERVAL=24

# 备份保留天数
DIFY_BACKUP_RETENTION_DAYS=7

# 备份存储路径
DIFY_BACKUP_PATH=backups